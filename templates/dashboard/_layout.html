{% extends "base.html" %}

{% block shell %}
<div class="dashboard-shell">
  <!-- Sidebar -->
  <aside class="dash-sidebar">
    <div class="d-flex align-items-center justify-content-between mb-3">
      <span class="text-uppercase small text-secondary">Menú</span>
      <button class="btn btn-sm btn-outline-secondary d-inline-flex align-items-center" type="button" data-sidebar-toggle>
        <i class="bi bi-layout-sidebar-inset"></i>
      </button>
    </div>

    <ul class="nav flex-column gap-1">
      <li class="nav-item">
        <a class="nav-link d-flex align-items-center {% if request.path == url_for('dash.estado') %}active{% endif %}" href="{{ url_for('dash.estado') }}">
          <i class="bi bi-activity me-2"></i> Estado histórico
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link d-flex align-items-center {% if request.path == url_for('dash.precios_cs') %}active{% endif %}" href="{{ url_for('dash.precios_cs') }}">
          <i class="bi bi-cash-coin me-2"></i> Precios Castellón
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link d-flex align-items-center {% if request.path == url_for('dash.precios_ciudad') %}active{% endif %}" href="{{ url_for('dash.precios_ciudad') }}">
          <i class="bi bi-geo-alt me-2"></i> Precios por ciudad
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link {% if request.path.startswith('/dashboard/puntos') %}active{% endif %}" 
            href="{{ url_for('puntos.puntos_list') }}">
          <i class="bi bi-geo-alt"></i> Puntos de carga
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link d-flex align-items-center {% if request.path.startswith('/dashboard/reservar') %}active{% endif %}" href="{{ url_for('resv.reservar_get') }}">
          <i class="bi bi-lightning me-2"></i> Reservar / Vigilar
        </a>
      </li>
    </ul>

    <div class="mt-auto small text-secondary">
      <hr>
      <div><i class="bi bi-hdd-network me-1"></i> {{ request.host }}</div>
      <div><i class="bi bi-clock-history me-1"></i> {{ (now().strftime('%H:%M') if now else '') }}</div>
    </div>
  </aside>

  <!-- Contenido -->
  <section class="dash-content">
    <header class="d-flex align-items-center justify-content-between mb-4">
      <div>
        <h1 class="h4 mb-0">{{ titulo or "Dashboard" }}</h1>
        {% if subtitulo %}<div class="text-secondary small">{{ subtitulo }}</div>{% endif %}
      </div>
      <div class="d-flex gap-2">
        {% block header_actions %}{% endblock %}
      </div>
    </header>

    {% block content %}{% endblock %}
  </section>
</div>
{% endblock %}
